<!DOCTYPE html>
<html lang="en">
<heaad>
  <title>Model Prediction</title>
    <meta charset="UTF-8">
      <link rel="stylesheet" href="..\static\css\styles.css">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
      <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.0/css/bootstrapValidator.min.css">
      <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.0/css/bootstrapValidator.min.css">
      <script src="..\static\js\scripts.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-validator/0.4.5/js/bootstrapvalidator.min.js"></script>
</head>

<body>
  <div class="container">
    <form class="well form-horizontal" action="/predict" method="post" id="myForm">
      <fieldset>
        <legend class="text-center">
          <h1>Input your data</h1>
        </legend>
        
        <!-- Text input-->
        <div class="form-group">
          <label class="col-md-4 control-label">Age</label>
          <div class="col-md-4 inputGroupContainer">
            <div class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
              <input name="age" class="form-control" type="text">
            </div>
          </div>
        </div>

        <!-- Select-->

        <div class="form-group">
          <label class="col-md-4 control-label">Gender</label>
          <div class="col-md-4 inputGroupContainer">
            <div class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
              <select name="sex" id="sex" class="form-control">
                <option value=" ">Please select value</option>
                <option value="0">0 Male</option>
                <option value="1">1 Female</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Select-->
        <div class="form-group">
          <label class="col-md-4 control-label">Chest Pain type</label>
          <div class="col-md-4 inputGroupContainer">
            <div class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
              <select name="cp" id="cp" class="form-control">
                <option value=" ">Please select value</option>
                <option value="0">0 No pain</option>
                <option value="1">1 Typical angina</option>
                <option value="2">2 Atypical angina</option>
                <option value="3">3 Non-anginal pain</option>
                <option value="4">4 Asymptomatic</option>
              </select>
            </div>
          </div>
        </div>


        <!-- Text input-->

        <div class="form-group">
          <label class="col-md-4 control-label">Resting blood pressure (in mm Hg)</label>
          <div class="col-md-4 inputGroupContainer">
            <div class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
              <input name="trtbps" class="form-control" type="text">
            </div>
          </div>
        </div>

        <!-- Text input-->

        <div class="form-group">
          <label class="col-md-4 control-label">Cholestoral in mg/dl</label>
          <div class="col-md-4 inputGroupContainer">
            <div class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
              <input name="chol" class="form-control" type="text">
            </div>
          </div>
        </div>

        <!-- Select-->

        <div class="form-group">
          <label class="col-md-4 control-label">Fasting blood sugar > 120 mg/dl</label>
          <div class="col-md-4 inputGroupContainer">
            <div class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
              <select name="fbs" id="fbs" class="form-control">
                <option value=" ">Please select value</option>
                <option value="0">0 False</option>
                <option value="1">1 True</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Select -->

        <div class="form-group">
          <label class="col-md-4 control-label">Resting electrocardiographic results</label>
          <div class="col-md-4 selectContainer">
            <div class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
              <select name="restecg" class="form-control selectpicker">
                <option value=" ">Please select value</option>
                <option value="0">0 normal</option>
                <option value="1">1 having ST-T wave abnormality</option>
                <option value="2">2 showing probable or definite</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Text input-->

        <div class="form-group">
          <label class="col-md-4 control-label">Maximum heart rate achieved</label>
          <div class="col-md-4 inputGroupContainer">
            <div class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
              <input name="thalachh" class="form-control" type="text">
            </div>
          </div>
        </div>

        <!-- Select -->
        <div class="form-group">
          <label class="col-md-4 control-label">Exercise induced angina</label>
          <div class="col-md-4 selectContainer">
            <div class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
              <select name="exng" class="form-control selectpicker">
                <option value=" ">Please select value</option>
                <option value="0">0 No</option>
                <option value="1">1 Yes</option>
              </select>
            </div>
          </div>
        </div>


        <!-- Text input-->

        <div class="form-group">
          <label class="col-md-4 control-label">Oldpeak</label>
          <div class="col-md-4 inputGroupContainer">
            <div class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
              <input name="oldpeak" class="form-control" type="text">
            </div>
          </div>
        </div>

        <!-- Select -->

        <div class="form-group">
          <label class="col-md-4 control-label">Slope</label>
          <div class="col-md-4 selectContainer">
            <div class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
              <select name="slp" class="form-control selectpicker">
                <option value=" ">Please select value</option>
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Select -->

        <div class="form-group">
          <label class="col-md-4 control-label">Number of major vessels </label>
          <div class="col-md-4 selectContainer">
            <div class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
              <select name="caa" class="form-control selectpicker">
                <option value=" ">Please select value</option>
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="1">3</option>
                <option value="2">4</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Select -->
        <div class="form-group">
          <label class="col-md-4 control-label">Thal rate</label>
          <div class="col-md-4 selectContainer">
            <div class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
              <select name="thall" class="form-control selectpicker">
                <option value=" ">Please select value</option>
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="1">3</option>
              </select>
            </div>
          </div>
        </div>


        <!-- Success message -->
        <div class="alert alert-success" role="alert" id="success_message">Success <i
            class="glyphicon glyphicon-thumbs-up"></i> Thanks for contacting us, we will get back to you shortly.</div>

        <!-- Button -->
        <div class="form-group">
          <label class="col-md-4 control-label"></label>
          <div class="col-md-4">
            <button type="submit" class="btn btn-warning">Send <span class="glyphicon glyphicon-send"></span></button>
          </div>
        </div>

      </fieldset>
    </form>

    <div id="popup"></div>
  </div>
  </div><!-- /.container -->


  <script>
    const form = document.getElementById('myForm');
    const popup = document.getElementById('popup');
    const body = document.body;

    form.addEventListener('submit', async function (event) {
      event.preventDefault(); // Prevent default form submission

      // Get form data
      const formData = new FormData(form);

      // Send data using fetch API (modify URL as needed)
      const response = await fetch('/predict', {
        method: 'POST',
        body: formData
      });

      // Handle response (assuming JSON format)
      const data = await response.json();
      popup.textContent = `${data.prediction}`;
      popup.style.display = 'block';
      popup.classList.add('show');  // Add 'show' class to display the popup
    });

    // Close the popup when clicked anywhere on the body
    body.addEventListener('click', function (event) {
      if (event.target === popup || popup.classList.contains('show')) {
        popup.classList.remove('show');  // Remove 'show' class to hide the popup
      }
    });
  </script>
</body>
</html>